<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="UM Bioinformatics Core" />

<meta name="date" content="2021-11-09" />

<title>Day 3 - Module 11: DE Visualizationsand Gene Annotations</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/paper.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">RNA-Seq Demystified</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="Module00_Introduction.html">Intro</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Sequence QC
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Module01_Warming_Up.html">Warming up</a>
    </li>
    <li>
      <a href="Module02_QC.html">Quality Control</a>
    </li>
    <li>
      <a href="Module02optional_Cutadapt_MultiQC.html">Optional: Cutadapt/MultiQC</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Alignment
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Module03_Reference_Genomes.html">Reference Genomes</a>
    </li>
    <li>
      <a href="Module04_Alignment.html">Alignment/Quantification (STAR/RSEM)</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Quantification
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Module05_MultiQC_and_Count_Matrix.html">Count matrix / Alignment QC</a>
    </li>
    <li>
      <a href="Module05optional_Additional_Details.html">Optional: Additional details</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Groups/Model
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Module06_DEAnalysisSetup.html">Introduction to DESeq2</a>
    </li>
    <li>
      <a href="Module07_DESeq2Init.html">DESeq2 Initialization</a>
    </li>
    <li>
      <a href="Module08_DESeq2DE.html">Count Normalizations and DESeq2 model fitting</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Expression plots
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Module09_SampleQCViz.html">Sample Visualizations for QC</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Diff Expression
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Module10_DEComparisons.html">DE Comparisons and Gene Annotations</a>
    </li>
  </ul>
</li>
<li>
  <a href="Module99_Wrap_up.html">Wrap up</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Day 3 - Module 11: DE Visualizationsand Gene Annotations</h1>
<h4 class="author">UM Bioinformatics Core</h4>
<h4 class="date">2021-11-09</h4>

</div>


<!--- Allow the page to be wider --->
<style>
    body .main-container {
        max-width: 1200px;
    }
</style>
<blockquote>
<h1 id="objectives">Objectives:</h1>
<ul>
<li>Understand advantages of using gene ids when analyzing data.<br />
</li>
<li>Given a list of ENSEMBL gene ids, add gene symbols and Entrez accessions.<br />
</li>
<li>Generate common visualizations for differential expression comparisons<br />
</li>
<li>Understand reasonable thresholds for statistically significant differentially expressed genes<br />
</li>
<li>Discuss options for functional enrichments</li>
</ul>
</blockquote>
<div id="differential-expression-workflow" class="section level1" number="1">
<h1 number="1"><span class="header-section-number">1</span> Differential Expression Workflow</h1>
<p>Here we will generate summary figures for our results and annotate our DE tables.</p>
<p><img src="images/wayfinder/wayfinder-06.png" style="width:75.0%" /></p>
<p><strong>TODO: double check references to annotated table prior to running annotations</strong></p>
<hr />
</div>
<div id="visualizing-de-results" class="section level1" number="2">
<h1 number="2"><span class="header-section-number">2</span> Visualizing DE results</h1>
<p>Part of differential expression analysis is generating visualizations to share our results. While the DESeq2 tutorial provides <a href="http://bioconductor.org/packages/devel/bioc/vignettes/DESeq2/inst/doc/DESeq2.html#exploring-and-exporting-results">examples of other visualizations</a>, a common visualization to summarize DE comparisons are <a href="http://resources.qiagenbioinformatics.com/manuals/clcgenomicsworkbench/752/index.php?manual=Volcano_plots_inspecting_result_statistical_analysis.html">volcano plots</a>.</p>
<div id="generating-volcano-plots" class="section level2" number="2.1">
<h2 number="2.1"><span class="header-section-number">2.1</span> Generating Volcano plots</h2>
<p>As described by this <a href="https://galaxyproject.github.io/training-material/topics/transcriptomics/tutorials/rna-seq-viz-with-volcanoplot/tutorial.html">Galaxy project tutorial</a>, a volcano plot is a type of scatterplot that shows statistical significance (adjusted p-value) versus magnitude of change (fold change). It allows us to quickly identify genes with large fold changes that are also statistically significant. In a volcano plot, the most upregulated genes are towards the right, the most downregulated genes are towards the left, and the most statistically significant genes are towards the top.</p>
<p>First, we need to set thresholds for determining significant genes. A reasonable threshold would be a fold-change of less than -1.5 or greater than 1.5 and an adjusted pvalue less than 0.05.</p>
<pre class="r"><code>fc &lt;- 1.5
pval &lt;- 0.05</code></pre>
<p>Then, we need to sep up some objects to run our plotting code, creating a new object that will have the right shape for plotting, labeling our comparison of interest, and setting up our output directory</p>
<pre class="r"><code>df&lt;- res_WT[order(res_WT$padj),] #select our data of interest
df &lt;- as.data.frame(df) #convert our object type
df &lt;- cbind(&quot;id&quot; = row.names(df), df) #set rownames to valid column
str(df)</code></pre>
<pre><code>## &#39;data.frame&#39;:    24693 obs. of  7 variables:
##  $ id            : chr  &quot;ENSMUSG00000105263&quot; &quot;ENSMUSG00000069306&quot; &quot;ENSMUSG00000069045&quot; &quot;ENSMUSG00000086503&quot; ...
##  $ baseMean      : num  4504 7458 876 29135 650 ...
##  $ log2FoldChange: num  -1.23 6.5 9.86 -7.65 8.78 ...
##  $ lfcSE         : num  0.0889 0.4789 0.7603 0.6086 0.7007 ...
##  $ stat          : num  -13.9 13.6 13 -12.6 12.5 ...
##  $ pvalue        : num  8.40e-44 5.71e-42 1.91e-38 2.84e-36 4.81e-36 ...
##  $ padj          : num  1.47e-39 5.00e-38 1.11e-34 1.24e-32 1.68e-32 ...</code></pre>
<pre class="r"><code>Comparison &lt;- &quot;ko.control_v_wt.control&quot;

plotPath = &quot;figures/&quot;</code></pre>
<p>Once we’ve setup the annotations we need, we can proceed with generating the volcano plot, including our thresholds.</p>
<pre class="r"><code>pdf(file = paste0(plotPath,&#39;VolcanoPlot_&#39;, Comparison, &#39;.pdf&#39;), onefile = FALSE)
# Initialize the plot, saving as object &#39;p&#39; and specifying the plot type as &#39;geom_point&#39;

p &lt;- ggplot(df, aes(x = log2FoldChange, y = -log10(padj))) +
    geom_point(shape = 21, fill= &#39;darkgrey&#39;, color= &#39;darkgrey&#39;, size = 1) +
    theme_classic() +
    xlab(&#39;Log2 fold-change&#39;) + ylab(&#39;-Log10 adjusted p-value&#39;)

# Add threshold lines
p &lt;- p +
    geom_vline(
        xintercept = c(0, -log2(fc), log2(fc)),
        linetype = c(1, 2, 2),
        color = c(&#39;black&#39;, &#39;black&#39;, &#39;black&#39;)) +
    geom_hline(
        yintercept = -log10(pval),
        linetype = 2,
        color = &#39;black&#39;)

# Add Title that includes comparison name
p &lt;- p + ggtitle(as.character(Comparison))

print(p)
dev.off()</code></pre>
<pre><code>## quartz_off_screen 
##                 2</code></pre>
<pre class="r"><code>p</code></pre>
<p><img src="Module11_DEVisualizations_files/figure-html/VolcanoPlot-1.png" width="672" /></p>
<details>
<summary>
<em>Click for color coded volcano plot</em>
</summary>
<p>Now we need to <a href="https://www.statmethods.net/management/subset.html">subset our data</a> to label the datapoints (genes) that pass our thresholds.</p>
<pre class="r"><code>df$dot &lt;- rep(3, nrow(df))
df$dot[which(df$padj &lt;= pval &amp; df$log2FoldChange &lt; 0 &amp; abs(df$log2FoldChange) &gt;= log2(fc))] = 2
df$dot[which(df$padj &lt;= pval &amp; df$log2FoldChange &gt; 0 &amp; abs(df$log2FoldChange) &gt;= log2(fc))] = 1
df$sig &lt;- df$dot

#take top 5 up, down, then combine, assign label
top &lt;- rbind(head(subset(df, df$dot == 1), 5),head(subset(df, df$dot == 2), 5))
top$label &lt;- top$id
df &lt;- merge(x = df, y = top[,c(&#39;id&#39;,&#39;label&#39;)], by = &quot;id&quot;, all.x = TRUE)

#count the number of significan up and down genes, assign value for legend
df$dot &lt;- factor(df$dot,levels = c(1,2,3), labels = c(paste0(&#39;Up: &#39;, sum(df$dot == 1)),paste0(&#39;Down: &#39;, sum(df$dot == 2)),&#39;NS&#39;))</code></pre>
<p>Once we’ve setup the annotations we need, we can proceed with generating the volcano plot.</p>
<pre class="r"><code>pdf(file = paste0(plotPath,&#39;VolcanoPlot_Fancier&#39;, Comparison, &#39;.pdf&#39;), onefile = FALSE)

p &lt;- ggplot(df, aes(x = log2FoldChange, y = -log10(padj))) +
    geom_point(aes(color = df$dot), size = 1) +
    theme_classic() +
    xlab(&#39;Log2 fold-change&#39;) + ylab(&#39;-Log10 adjusted p-value&#39;)
# specify colors for up-/down-/nonsignificant genes
p &lt;- p + scale_color_manual(name = &#39;&#39;, values=c(&#39;#B31B21&#39;, &#39;#1465AC&#39;, &#39;darkgray&#39;))
# add threshol lines
p &lt;- p +
    geom_vline(
        xintercept = c(0, -log2(fc), log2(fc)),
        linetype = c(1, 2, 2),
        color = c(&#39;black&#39;, &#39;black&#39;, &#39;black&#39;)) +
    geom_hline(
        yintercept = -log10(pval),
        linetype = 2,
        color = &#39;black&#39;)
# Add Title that includes comparison name
p &lt;- p + ggtitle(as.character(Comparison))

print(p)
dev.off()</code></pre>
<pre><code>## quartz_off_screen 
##                 2</code></pre>
<pre class="r"><code>p</code></pre>
<p><img src="Module11_DEVisualizations_files/figure-html/VolcanoPlot2-1.png" width="672" /></p>
</details>
<p>For additional visualizations for our DE results, this <a href="https://hbctraining.github.io/DGE_workshop/lessons/06_DGE_visualizing_results.html">HBC tutorial</a> includes some nice examples.</p>
</div>
</div>
<div id="how-to-annotate-the-results-table" class="section level1" number="3">
<h1 number="3"><span class="header-section-number">3</span> How to annotate the results table</h1>
<p>It can be useful to annotate our results table with additional information to make them easier to interpret, such as adding additional gene information or better summarizing our DE results.</p>
<div id="summarizing-our-de-results" class="section level2" number="3.1">
<h2 number="3.1"><span class="header-section-number">3.1</span> Summarizing our DE results</h2>
<p>To generate a general summary of the DE results, we can use the <code>summary</code> function to generate a basic summary by DESeq2.</p>
<p>However, we can also use conditional statements to determine the number of genes that pass our thresholds for each comparison, which might be more informative.</p>
<p><em>[Question]: How would we identify the number of genes with adjusted p-values &lt; 0.05 and a fold-change above 1.5 (or below -1.5)?</em></p>
<pre class="r"><code>#summary(res_WT)
sum(res_WT$padj &lt; 0.05 &amp; abs(res_WT$log2FoldChange) &gt;= log2(1.5), na.rm = TRUE)</code></pre>
<pre><code>## [1] 735</code></pre>
<pre class="r"><code>sum(res_Tx$padj &lt; 0.05 &amp; abs(res_Tx$log2FoldChange) &gt;= log2(1.5), na.rm = TRUE)</code></pre>
<pre><code>## [1] 1152</code></pre>
<p>How do the number of DE genes compare to what we observed from the PCA plots?</p>
<div id="chosing-thresholds" class="section level4" number="3.1.0.1">
<h4 number="3.1.0.1"><span class="header-section-number">3.1.0.1</span> Chosing thresholds</h4>
<p>Thresholding on adjusted p-values &lt; 0.05 is a standard threshold, but depending on the research question and/or how the results will be used, other thresholds might be reasonable.</p>
<div id="exercise" class="section level5" number="3.1.0.1.1">
<h5 number="3.1.0.1.1"><span class="header-section-number">3.1.0.1.1</span> Exercise</h5>
<p>How would we count the number of genes with a more stringent significance threshold (i.e. <code>padj</code> &lt; 0.01), ignoring fold-change? How many DE genes would we have with these thresholds?</p>
<pre class="r"><code>sum(res_WT$padj &lt; 0.01, na.rm = TRUE)</code></pre>
<pre><code>## [1] 713</code></pre>
<p>If we threshold only on significance, we still identify less DE genes than the 6057 identified in the paper. How should we interpret these differences? Are we in danger of missing relevant genes or, due to DESeq2’s stringency, are we better protected against irrelevant genes? One of the authors of DESeq2, wrote this <a href="https://mikelove.wordpress.com/2016/09/28/deseq2-or-edger/">blog post that detailed differences between DESeq2 and EdgeR</a> but this <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5739479/">review of multiple DE tools by Costa-Silva, Domingues, and Martins Lopes</a> may also be useful for making choices for your own data.</p>
</div>
</div>
<div id="subsetting-significant-genes" class="section level4" number="3.1.0.2">
<h4 number="3.1.0.2"><span class="header-section-number">3.1.0.2</span> Subsetting significant genes</h4>
<details>
<summary>
<em>Click for code to generate a table of only DE genes</em>
</summary>
<p>You may be interested in identifying only the genes that pass your significance thesholds. A useful way to do this is to conditionally subset your results.</p>
<pre class="r"><code>res_sig &lt;- na.omit(res_WT)
res_sig &lt;- res_sig[which(res_sig$padj &lt; 0.05 &amp; abs(res_sig$log2FoldChange) &gt;= log2(1.5)), ]
head(res_sig)</code></pre>
<p>For more details about subsetting tables in R, we recommend reviewing the <a href="https://datacarpentry.org/R-ecology-lesson/03-dplyr.html">Data Carpentry manipulating and analyzing data module</a>. We can also annotate our results to include a column that identifies our significant genes.</p>
<pre class="r"><code>res_WT_DE &lt;- res_WT # copy table
# add a column and assign all genes are non-significance
res_WT_DE$Call &lt;- rep(FALSE, length(res_WT$baseMean))

# change &#39;Call&#39; column to TRUE if meets conditions for significant differences
res_WT_DE[which(!is.na(res_WT_DE$padj) &amp; res_WT_anno$padj &lt; 0.05 &amp; abs(res_WT_DE$log2FoldChange) &gt;= log2(1.5)), ]$Call &lt;- TRUE

# reorder table to rank significant genes at the top
res_WT_DE &lt;- res_WT_DE[order(-res_WT_DE$Call),]</code></pre>
</details>
</div>
</div>
<div id="adding-genome-annotations" class="section level2" number="3.2">
<h2 number="3.2"><span class="header-section-number">3.2</span> Adding genome annotations</h2>
<p>Bioconductor provides many tools and resources to facilitate access to <a href="http://bioconductor.org/packages/devel/workflows/vignettes/annotation/inst/doc/Annotation_Resources.html">genomic annotation resources</a>.</p>
<p>We can access additional genomic annotations using the <a href="https://bioconductor.org/packages/release/bioc/html/biomaRt.html"><code>bioMart</code> package</a>. To identify we’ll structure our ‘query’ or search of the bioMart resources to use the <a href="https://m.ensembl.org/info/genome/genebuild/gene_names.html">ENSEMBL id</a> from our alignment to add the gene symbols and gene description for each gene.</p>
<div id="gene-symbols-versus-gene-ids" class="section level3" number="3.2.1">
<h3 number="3.2.1"><span class="header-section-number">3.2.1</span> Gene symbols versus Gene IDs</h3>
<p>Since UCSC and ENSEMBL are two difference reference builds, not all genes are present in both references, as outlined in <a href="https://bmcgenomics.biomedcentral.com/articles/10.1186/s12864-015-1308-8">this comprehensive review of reference genomes by Zhao &amp; Zhang</a>. Additionally, since gene symbols can change over time or be ambiguous we use and recommend using the EMSEMBL reference genome and ENSEMBL ids for alignments.</p>
<p>To proceed with our BioMart query, we will first load the biomaRt library &amp; choose what reference we want to access. For a more detailed walk through of using biomaRt, <a href="https://bioinformatics-core-shared-training.github.io/cruk-summer-school-2019/RNAseq/html/05_Annotation_and_Visualisation.html">this training module</a> might be useful, including what to do when annotations are not 1:1 mappings.</p>
<pre class="r"><code>library(&quot;biomaRt&quot;)

# using an archived host since my R/Bioconductor versions are out of date
listMarts()</code></pre>
<pre><code>##                biomart                version
## 1 ENSEMBL_MART_ENSEMBL      Ensembl Genes 104
## 2   ENSEMBL_MART_MOUSE      Mouse strains 104
## 3     ENSEMBL_MART_SNP  Ensembl Variation 104
## 4 ENSEMBL_MART_FUNCGEN Ensembl Regulation 104</code></pre>
<pre class="r"><code># choose ensembl database since have ENSEMBl gene ids, using 
ensembl &lt;- useMart(&quot;ENSEMBL_MART_ENSEMBL&quot;)

# search for mouse
searchDatasets(mart = ensembl, pattern = &quot;mus&quot;)</code></pre>
<pre><code>##                       dataset                                   description            version
## 18     bmusculus_gene_ensembl                Blue whale genes (mBalMus1.v2)        mBalMus1.v2
## 103 mmoschiferus_gene_ensembl Siberian musk deer genes (MosMos_v2_BIUU_UCD) MosMos_v2_BIUU_UCD
## 107    mmusculus_gene_ensembl                          Mouse genes (GRCm39)             GRCm39
## 157       psimus_gene_ensembl       Greater bamboo lemur genes (Prosim_1.0)         Prosim_1.0
## 181     smaximus_gene_ensembl                   Turbot genes (ASM1334776v1)       ASM1334776v1
## 196   umaritimus_gene_ensembl                 Polar bear genes (UrsMar_1.0)         UrsMar_1.0</code></pre>
<p><em>Note that this process takes some time and will take up a larger amount of working memory so proceed with caution if you try to run these commands on a laptop with less than 4G of memory</em></p>
<pre class="r"><code># redefine ensembl with species specific database
ensembl &lt;- useDataset(&quot;mmusculus_gene_ensembl&quot;, mart=ensembl)</code></pre>
<p>To identify possible <strong>filters</strong> to restrict our data, we can use the <code>listFilters</code> function. To identify the <strong>attributes</strong> we want to retrive, we can use the <code>listAttributes</code> function. There are also <a href="https://bioconductor.org/packages/release/bioc/vignettes/biomaRt/inst/doc/accessing_ensembl.html#how-to-build-a-biomart-query">search functions</a> to help narrow down the available options.</p>
<pre class="r"><code>head(listFilters(mart = ensembl), n = 20)
head(listAttributes(ensembl), n = 30)</code></pre>
<p>Next, we’ll <a href="https://bioconductor.org/packages/release/bioc/vignettes/biomaRt/inst/doc/accessing_ensembl.html#how-to-build-a-biomart-query">build our query</a> to retrive the information we want to add to our DE results table.</p>
<pre class="r"><code>## wasn&#39;t working for my version of biomaRt but might work for you
GeneKey &lt;- getBM(attributes=c(&#39;ensembl_gene_id&#39;, &#39;external_gene_name&#39;),
      filters = &#39;ensembl_gene_id&#39;,
      values = row.names(assay(dds)),
      mart = ensembl) # will take some time to run</code></pre>
<pre><code>## Batch submitting query [=================&gt;-------------------------------------------------------------------------] 20% eta: 1m Batch
## submitting query [===================================&gt;-------------------------------------------------------] 40% eta: 29s Batch submitting
## query [======================================================&gt;------------------------------------] 60% eta: 15s Batch submitting query
## [========================================================================&gt;------------------] 80% eta: 6s</code></pre>
<pre class="r"><code>head(GeneKey)</code></pre>
<pre><code>##      ensembl_gene_id external_gene_name
## 1 ENSMUSG00000000001              Gnai3
## 2 ENSMUSG00000000028              Cdc45
## 3 ENSMUSG00000000031                H19
## 4 ENSMUSG00000000037              Scml2
## 5 ENSMUSG00000000049               Apoh
## 6 ENSMUSG00000000056               Narf</code></pre>
<p>Now that we have the ENSEMBL information and a gene symbol to match to our results, we can add this to our DE results table.</p>
<pre class="r"><code>res_WT_anno &lt;- res_WT # copy table
res_WT_anno &lt;- cbind(genes=row.names(res_WT_anno), res_WT_anno[ ,c(1:6)])
res_WT_anno &lt;- as.data.frame(res_WT_anno)

# combine the two tables using the merge function (similar to join from `tidyverse`)
res_WT_anno &lt;- merge(GeneKey, res_WT_anno, by.x = &quot;external_gene_name&quot;, by.y=&quot;genes&quot;, all.x = FALSE, all.y = TRUE)
head(res_WT_anno)</code></pre>
<pre><code>##   external_gene_name ensembl_gene_id    baseMean log2FoldChange      lfcSE        stat       pvalue        padj
## 1 ENSMUSG00000000001            &lt;NA&gt; 6255.787330   -0.013701731 0.09318662 -0.14703540 0.8831040821 0.961003102
## 2 ENSMUSG00000000028            &lt;NA&gt; 1337.989818    0.522678839 0.13597532  3.84392445 0.0001210823 0.003915367
## 3 ENSMUSG00000000031            &lt;NA&gt;    3.773626   -1.156215091 1.60061324 -0.72235757 0.4700746650          NA
## 4 ENSMUSG00000000037            &lt;NA&gt;   27.563473   -0.279210114 0.47647640 -0.58598938 0.5578826494 0.804474952
## 5 ENSMUSG00000000049            &lt;NA&gt;    2.256963    4.011334948 1.88908476  2.12342772 0.0337180265          NA
## 6 ENSMUSG00000000056            &lt;NA&gt; 2194.178477   -0.008213194 0.17732202 -0.04631796 0.9630568262 0.988889835</code></pre>
<p>Notice that not all genes were annotated with an ENSEMBl gene id or gene description. While we are able to annotate our results, we should be very cautious as the gene symbol is not a good unique identifier plus we did not use a UCSC annotation resource so the HUGO gene symbol may not always match. However, this code is similar to the steps needed to annotate ENSEMBL id based results, like what would have been generated from yesterday’s alignments, with more interpretable gene symbols.</p>
<p><strong>Note</strong>: For additional information regarding bioMart, please consult the <a href="https://bioconductor.org/packages/release/bioc/vignettes/biomaRt/inst/doc/accessing_ensembl.html">ENSEMBL bioMart vignette</a> or the broader <a href="http://bioconductor.org/packages/devel/workflows/vignettes/annotation/inst/doc/Annotation_Resources.html">Bioconductor Annotation Resources vignette</a>.</p>
</div>
</div>
</div>
<div id="outputting-results-to-file" class="section level1" number="4">
<h1 number="4"><span class="header-section-number">4</span> Outputting results to file</h1>
<p>A key aspect of our analysis is preserving the relevant datasets for both our records and for downstream applications.</p>
<div id="count-tables" class="section level2" number="4.1">
<h2 number="4.1"><span class="header-section-number">4.1</span> Count tables</h2>
<p>The most relevant count tables are the raw, filtered count table that we used as the input for our analysis and the rlog normalized count table that we used for our quality control visualizations.</p>
<p>First, we’ll setup a new directory for our output tables.</p>
<pre class="r"><code>dir.create(&quot;tables&quot;, showWarnings = FALSE)</code></pre>
<p>To output the raw counts, we will need to use the <code>counts</code> function to access the count table from within its larger <code>DESeqDataSet</code> object.</p>
<pre class="r"><code>write.csv(counts(dds, normalized = FALSE), file=&quot;tables/DESeq2_raw_counts.csv&quot;)</code></pre>
<p>Then we’ll output the rlog count table, using the <code>assay</code> function to access the normalized count table from within its larger <code>DESeqDataSet</code> object.</p>
<pre class="r"><code>write.csv(assay(rld), file=&quot;tables/DESeq2_rlogNormalized_counts.csv&quot;)</code></pre>
</div>
<div id="de-results-table" class="section level2" number="4.2">
<h2 number="4.2"><span class="header-section-number">4.2</span> DE results table</h2>
<p>Next we’ll write out our DE results for the KD comparison to file, since we added additional information to that table.</p>
<pre class="r"><code>write.csv(res_WT_anno,
          row.names = FALSE,
          na = &quot;.&quot;,
          file=&quot;tables/DEResults_ko.control_v_wt.control_annotated.csv&quot;)</code></pre>
<p>If we generated another comparsion, we could repeat our annotations or write the DE results directly to file.</p>
<pre class="r"><code>write.csv(res_Tx,
          row.names = FALSE,
          na = &quot;.&quot;,
          file=&quot;tables/DEResults_ko.Tx_v_wt.Tx.csv&quot;)</code></pre>
</div>
</div>
<div id="summary" class="section level1" number="5">
<h1 number="5"><span class="header-section-number">5</span> Summary</h1>
<p>In this section, we:</p>
<ul>
<li>Generated a volcano plot for our differential expression results<br />
</li>
<li>Summarized our differential expression results<br />
</li>
<li>Discussed choosing thresholds<br />
</li>
<li>Annotated our tables of results to map gene IDs to gene symbols<br />
</li>
<li>Saved our results to file</li>
</ul>
</div>
<div id="key-takeaways" class="section level1" number="6">
<h1 number="6"><span class="header-section-number">6</span> Key takeaways</h1>
<p>Overall, we’ve run through most of the building blocks needed to run a differential expression analysis and hopefully built up a better understanding of how differential expression comparisons work, particularly how experimental design can impact our results.</p>
<p>What to consider moving forward:</p>
<ul>
<li>How can I control for technical variation in my experimental design?<br />
</li>
<li>How much variation is expected with a treatment group?<br />
</li>
<li>What is my RNA quality, and how can that be optimized?<br />
</li>
<li>Are there quality concerns for my sequencing data?</li>
<li>What comparisons are relevant to my biological question?<br />
</li>
<li>Are there covariates that should be considered?<br />
</li>
<li>What will a differential expression analysis tell me?</li>
</ul>
<p><strong>Let’s pause here for general questions about the last two days of content</strong></p>
<hr />
</div>
<div id="extension---what-can-we-do-with-our-de-results" class="section level1" number="7">
<h1 number="7"><span class="header-section-number">7</span> Extension - what can we do with our DE results?</h1>
<p>Now that we have our DE results, have we address the biological question relevant to the authors of the <a href="http://www.ncbi.nlm.nih.gov/pubmed/25464849">original paper</a>? On the one hand, yes - we now have two tables of genes that are impacted by change in Mov10 expression. But with two lists of genes alone, it can be difficult to find patterns or understand broader biological impacts.</p>
<p>What if we wanted to find out what genes were signifant in <em>both</em> comparisons? The <code>intersect</code> function, such as implimented as <a href="https://www.datasciencemadesimple.com/intersect-function-r-using-dplyr-intersection-data-frames/">part of the dplyr package</a> would be useful to identify shared significant genes. A <a href="https://www.r-graph-gallery.com/14-venn-diagramm.html">venn diagram</a> could be a way to visualize these overlaps.</p>
<p>A way to determine possible <a href="https://www.ebi.ac.uk/training-beta/online/courses/functional-genomics-ii-common-technologies-and-data-analysis-methods/biological-interpretation-of-gene-expression-data-2/">broader biological interpretations</a> from the observed DE results, is functional enrichments. There are many options, such as some included in this <a href="https://www.researchgate.net/post/How_can_I_analyze_a_set_of_DEGs_differentially_expressed_genes_to_obtain_information_from_them">discussion thread</a>. Other common functional enrichments approaches are gene set enrichment analysis, aka <a href="http://software.broadinstitute.org/gsea/index.jsp">GSEA</a>, Database for Annotation, Visualization and Integrated Discovery, aka <a href="https://david.ncifcrf.gov/">DAVID</a>, <a href="https://digitalinsights.qiagen.com/">Ingenity</a>, and [iPathway Guide]</p>
<p>The University of Michigan has license and support for additional tools, such as Cytoscape, so we recommend reaching out to staff with <a href="https://www.lib.umich.edu/locations-and-hours/taubman-health-sciences-library/research-and-clinical-support">Taubman Library</a> to learn more about resources that might be application toyour research.</p>
<hr />
</div>
<div id="sources-used" class="section level1" number="8">
<h1 number="8"><span class="header-section-number">8</span> Sources Used</h1>
<ul>
<li>HBC DGE training module, part 1: <a href="https://hbctraining.github.io/DGE_workshop/lessons/04_DGE_DESeq2_analysis.html" class="uri">https://hbctraining.github.io/DGE_workshop/lessons/04_DGE_DESeq2_analysis.html</a><br />
</li>
<li>HBC DGE training module, part 2: <a href="https://hbctraining.github.io/DGE_workshop/lessons/05_DGE_DESeq2_analysis2.html" class="uri">https://hbctraining.github.io/DGE_workshop/lessons/05_DGE_DESeq2_analysis2.html</a><br />
</li>
<li>DESeq2 vignette: <a href="http://bioconductor.org/packages/devel/bioc/vignettes/DESeq2/inst/doc/DESeq2.html#differential-expression-analysis" class="uri">http://bioconductor.org/packages/devel/bioc/vignettes/DESeq2/inst/doc/DESeq2.html#differential-expression-analysis</a><br />
</li>
<li>Bioconductor Genomic Annotation resources: <a href="http://bioconductor.org/packages/devel/workflows/vignettes/annotation/inst/doc/Annotation_Resources.html" class="uri">http://bioconductor.org/packages/devel/workflows/vignettes/annotation/inst/doc/Annotation_Resources.html</a><br />
</li>
<li>BioMart vignette: <a href="https://bioconductor.org/packages/release/bioc/vignettes/biomaRt/inst/doc/accessing_ensembl.html" class="uri">https://bioconductor.org/packages/release/bioc/vignettes/biomaRt/inst/doc/accessing_ensembl.html</a></li>
</ul>
</div>
<div id="additional-resources" class="section level1" number="9">
<h1 number="9"><span class="header-section-number">9</span> Additional Resources</h1>
<ul>
<li>MIDAS Reproduciblity Hub: <a href="https://midas.umich.edu/reproducibility-overview/" class="uri">https://midas.umich.edu/reproducibility-overview/</a></li>
<li>ARC resources: <a href="https://arc-ts.umich.edu/" class="uri">https://arc-ts.umich.edu/</a></li>
<li>Gene Set Enrichment Resources from Bioconductor: <a href="https://bioinformatics-core-shared-training.github.io/cruk-summer-school-2018/RNASeq2018/html/06_Gene_set_testing.nb.html" class="uri">https://bioinformatics-core-shared-training.github.io/cruk-summer-school-2018/RNASeq2018/html/06_Gene_set_testing.nb.html</a></li>
<li>Using HTSeq data with DESeq2: <a href="https://angus.readthedocs.io/en/2019/diff-ex-and-viz.html" class="uri">https://angus.readthedocs.io/en/2019/diff-ex-and-viz.html</a></li>
<li>Detailed RNA-seq analysis paper: <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6096346/" class="uri">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6096346/</a></li>
<li>Overview of RNA-seq analysis considerations: <a href="https://academic-oup-com.proxy.lib.umich.edu/bfg/article/14/2/130/257370" class="uri">https://academic-oup-com.proxy.lib.umich.edu/bfg/article/14/2/130/257370</a></li>
<li>Alternative overview of DESeq2, including visualizations and functional enrichments: <a href="http://dputhier.github.io/jgb71e-polytech-bioinfo-app/practical/rna-seq_R/rnaseq_diff_Snf2.html" class="uri">http://dputhier.github.io/jgb71e-polytech-bioinfo-app/practical/rna-seq_R/rnaseq_diff_Snf2.html</a></li>
</ul>
<hr />
</div>
<div id="session-info" class="section level1" number="10">
<h1 number="10"><span class="header-section-number">10</span> Session Info</h1>
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>## R version 4.1.1 (2021-08-10)
## Platform: x86_64-apple-darwin17.0 (64-bit)
## Running under: macOS Big Sur 11.6
## 
## Matrix products: default
## LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats4    stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] biomaRt_2.50.0              data.table_1.14.0           RColorBrewer_1.1-2          pheatmap_1.0.12            
##  [5] ggrepel_0.9.1               dplyr_1.0.7                 tidyr_1.1.3                 ggplot2_3.3.5              
##  [9] DESeq2_1.34.0               SummarizedExperiment_1.24.0 Biobase_2.30.0              MatrixGenerics_1.6.0       
## [13] matrixStats_0.61.0          GenomicRanges_1.46.0        GenomeInfoDb_1.30.0         IRanges_2.28.0             
## [17] S4Vectors_0.32.2            BiocGenerics_0.40.0         rmarkdown_2.10             
## 
## loaded via a namespace (and not attached):
##  [1] bitops_1.0-7           bit64_4.0.5            filelock_1.0.2         progress_1.2.2         httr_1.4.2            
##  [6] tools_4.1.1            bslib_0.2.5.1          utf8_1.2.2             R6_2.5.0               DBI_1.1.1             
## [11] colorspace_2.0-2       withr_2.4.2            tidyselect_1.1.1       prettyunits_1.1.1      bit_4.0.4             
## [16] curl_4.3.2             compiler_4.1.1         xml2_1.3.2             DelayedArray_0.20.0    labeling_0.4.2        
## [21] sass_0.4.0             scales_1.1.1           genefilter_1.76.0      rappdirs_0.3.3         stringr_1.4.0         
## [26] digest_0.6.27          XVector_0.34.0         pkgconfig_2.0.3        htmltools_0.5.1.1      dbplyr_2.1.1          
## [31] fastmap_1.1.0          highr_0.9              rlang_0.4.11           RSQLite_2.2.7          jquerylib_0.1.4       
## [36] generics_0.1.0         farver_2.1.0           jsonlite_1.7.2         BiocParallel_1.28.0    RCurl_1.98-1.5        
## [41] magrittr_2.0.1         GenomeInfoDbData_1.2.7 Matrix_1.3-4           Rcpp_1.0.7             munsell_0.5.0         
## [46] fansi_0.5.0            lifecycle_1.0.0        stringi_1.7.3          yaml_2.2.1             zlibbioc_1.16.0       
## [51] BiocFileCache_2.2.0    grid_4.1.1             blob_1.2.2             parallel_4.1.1         crayon_1.4.1          
## [56] lattice_0.20-44        splines_4.1.1          annotate_1.48.0        hms_1.1.0              locfit_1.5-9.4        
## [61] knitr_1.33             pillar_1.6.2           geneplotter_1.72.0     XML_3.99-0.6           glue_1.4.2            
## [66] evaluate_0.14          BiocManager_1.30.16    vctrs_0.3.8            gtable_0.3.0           purrr_0.3.4           
## [71] assertthat_0.2.1       cachem_1.0.5           xfun_0.25              xtable_1.8-4           survival_3.2-11       
## [76] tibble_3.1.3           AnnotationDbi_1.32.3   memoise_2.0.0          ellipsis_0.3.2</code></pre>
<hr />
<p>These materials have been adapted and extended from materials listed above. These are open access materials distributed under the terms of the <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution license (CC BY 4.0)</a>, which permits unrestricted use, distribution, and reproduction in any medium, provided the original author and source are credited.</p>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiRGF5IDMgLSBNb2R1bGUgMTE6IERFIFZpc3VhbGl6YXRpb25zYW5kIEdlbmUgQW5ub3RhdGlvbnMiCmF1dGhvcjogIlVNIEJpb2luZm9ybWF0aWNzIENvcmUiCmRhdGU6ICJgciBTeXMuRGF0ZSgpYCIKb3V0cHV0OgogICAgICAgIGh0bWxfZG9jdW1lbnQ6CiAgICAgICAgICAgIHRoZW1lOiBwYXBlcgogICAgICAgICAgICB0b2M6IHRydWUKICAgICAgICAgICAgdG9jX2RlcHRoOiA0CiAgICAgICAgICAgIHRvY19mbG9hdDogdHJ1ZQogICAgICAgICAgICBudW1iZXJfc2VjdGlvbnM6IHRydWUKICAgICAgICAgICAgZmlnX2NhcHRpb246IHRydWUKICAgICAgICAgICAgbWFya2Rvd246IEdGTQogICAgICAgICAgICBjb2RlX2Rvd25sb2FkOiB0cnVlCi0tLQoKPCEtLS0gQWxsb3cgdGhlIHBhZ2UgdG8gYmUgd2lkZXIgLS0tPgo8c3R5bGU+CiAgICBib2R5IC5tYWluLWNvbnRhaW5lciB7CiAgICAgICAgbWF4LXdpZHRoOiAxMjAwcHg7CiAgICB9Cjwvc3R5bGU+Cj4gIyBPYmplY3RpdmVzOiAgICAKPiAqIFVuZGVyc3RhbmQgYWR2YW50YWdlcyBvZiB1c2luZyBnZW5lIGlkcyB3aGVuIGFuYWx5emluZyBkYXRhLiAgICAKPiAqIEdpdmVuIGEgbGlzdCBvZiBFTlNFTUJMIGdlbmUgaWRzLCBhZGQgZ2VuZSBzeW1ib2xzIGFuZCBFbnRyZXogYWNjZXNzaW9ucy4gICAgCj4gKiBHZW5lcmF0ZSBjb21tb24gdmlzdWFsaXphdGlvbnMgZm9yIGRpZmZlcmVudGlhbCBleHByZXNzaW9uIGNvbXBhcmlzb25zICAgIAo+ICogVW5kZXJzdGFuZCByZWFzb25hYmxlIHRocmVzaG9sZHMgZm9yIHN0YXRpc3RpY2FsbHkgc2lnbmlmaWNhbnQgZGlmZmVyZW50aWFsbHkgZXhwcmVzc2VkIGdlbmVzICAgIAo+ICogRGlzY3VzcyBvcHRpb25zIGZvciBmdW5jdGlvbmFsIGVucmljaG1lbnRzICAgIAoKYGBge3IgTW9kdWxlcywgZXZhbD1UUlVFLCBlY2hvPUZBTFNFLCBtZXNzYWdlPUZBTFNFLCB3YXJuaW5nPUZBTFNFfQpsaWJyYXJ5KERFU2VxMikKbGlicmFyeShnZ3Bsb3QyKQpsaWJyYXJ5KHRpZHlyKQpsaWJyYXJ5KGRwbHlyKQpsaWJyYXJ5KGdncmVwZWwpCmxpYnJhcnkoUkNvbG9yQnJld2VyKQpsb2FkKCJyZGF0YS9SdW5uaW5nRGF0YS5SRGF0YSIpCmBgYAoKIyBEaWZmZXJlbnRpYWwgRXhwcmVzc2lvbiBXb3JrZmxvdwoKSGVyZSB3ZSB3aWxsIGdlbmVyYXRlIHN1bW1hcnkgZmlndXJlcyBmb3Igb3VyIHJlc3VsdHMgYW5kIGFubm90YXRlIG91ciBERSB0YWJsZXMuCgohW10oLi9pbWFnZXMvd2F5ZmluZGVyL3dheWZpbmRlci0wNi5wbmcpe3dpZHRoPTc1JX0KCioqVE9ETzogZG91YmxlIGNoZWNrIHJlZmVyZW5jZXMgdG8gYW5ub3RhdGVkIHRhYmxlIHByaW9yIHRvIHJ1bm5pbmcgYW5ub3RhdGlvbnMqKgoKLS0tCgojIFZpc3VhbGl6aW5nIERFIHJlc3VsdHMKClBhcnQgb2YgZGlmZmVyZW50aWFsIGV4cHJlc3Npb24gYW5hbHlzaXMgaXMgZ2VuZXJhdGluZyB2aXN1YWxpemF0aW9ucyB0byBzaGFyZSBvdXIgcmVzdWx0cy4gV2hpbGUgdGhlIERFU2VxMiB0dXRvcmlhbCBwcm92aWRlcyBbZXhhbXBsZXMgb2Ygb3RoZXIgdmlzdWFsaXphdGlvbnNdKGh0dHA6Ly9iaW9jb25kdWN0b3Iub3JnL3BhY2thZ2VzL2RldmVsL2Jpb2MvdmlnbmV0dGVzL0RFU2VxMi9pbnN0L2RvYy9ERVNlcTIuaHRtbCNleHBsb3JpbmctYW5kLWV4cG9ydGluZy1yZXN1bHRzKSwgYSBjb21tb24gdmlzdWFsaXphdGlvbiB0byBzdW1tYXJpemUgREUgY29tcGFyaXNvbnMgYXJlIFt2b2xjYW5vIHBsb3RzXShodHRwOi8vcmVzb3VyY2VzLnFpYWdlbmJpb2luZm9ybWF0aWNzLmNvbS9tYW51YWxzL2NsY2dlbm9taWNzd29ya2JlbmNoLzc1Mi9pbmRleC5waHA/bWFudWFsPVZvbGNhbm9fcGxvdHNfaW5zcGVjdGluZ19yZXN1bHRfc3RhdGlzdGljYWxfYW5hbHlzaXMuaHRtbCkuIAoKIyMgR2VuZXJhdGluZyBWb2xjYW5vIHBsb3RzCgpBcyBkZXNjcmliZWQgYnkgdGhpcyBbR2FsYXh5IHByb2plY3QgdHV0b3JpYWxdKGh0dHBzOi8vZ2FsYXh5cHJvamVjdC5naXRodWIuaW8vdHJhaW5pbmctbWF0ZXJpYWwvdG9waWNzL3RyYW5zY3JpcHRvbWljcy90dXRvcmlhbHMvcm5hLXNlcS12aXotd2l0aC12b2xjYW5vcGxvdC90dXRvcmlhbC5odG1sKSwgYSB2b2xjYW5vIHBsb3QgaXMgYSB0eXBlIG9mIHNjYXR0ZXJwbG90IHRoYXQgc2hvd3Mgc3RhdGlzdGljYWwgc2lnbmlmaWNhbmNlIChhZGp1c3RlZCBwLXZhbHVlKSB2ZXJzdXMgbWFnbml0dWRlIG9mIGNoYW5nZSAoZm9sZCBjaGFuZ2UpLiBJdCBhbGxvd3MgdXMgdG8gcXVpY2tseSBpZGVudGlmeSBnZW5lcyB3aXRoIGxhcmdlIGZvbGQgY2hhbmdlcyB0aGF0IGFyZSBhbHNvIHN0YXRpc3RpY2FsbHkgc2lnbmlmaWNhbnQuIEluIGEgdm9sY2FubyBwbG90LCB0aGUgbW9zdCB1cHJlZ3VsYXRlZCBnZW5lcyBhcmUgdG93YXJkcyB0aGUgcmlnaHQsIHRoZSBtb3N0IGRvd25yZWd1bGF0ZWQgZ2VuZXMgYXJlIHRvd2FyZHMgdGhlIGxlZnQsIGFuZCB0aGUgbW9zdCBzdGF0aXN0aWNhbGx5IHNpZ25pZmljYW50IGdlbmVzIGFyZSB0b3dhcmRzIHRoZSB0b3AuCgpGaXJzdCwgd2UgbmVlZCB0byBzZXQgdGhyZXNob2xkcyBmb3IgZGV0ZXJtaW5pbmcgc2lnbmlmaWNhbnQgZ2VuZXMuIEEgcmVhc29uYWJsZSB0aHJlc2hvbGQgd291bGQgYmUgYSBmb2xkLWNoYW5nZSBvZiBsZXNzIHRoYW4gLTEuNSBvciBncmVhdGVyIHRoYW4gMS41IGFuZCBhbiBhZGp1c3RlZCBwdmFsdWUgbGVzcyB0aGFuIDAuMDUuCmBgYHtyIFBsb3RTZXR1cDF9CmZjIDwtIDEuNQpwdmFsIDwtIDAuMDUKYGBgCgpUaGVuLCB3ZSBuZWVkIHRvIHNlcCB1cCBzb21lIG9iamVjdHMgdG8gcnVuIG91ciBwbG90dGluZyBjb2RlLCBjcmVhdGluZyBhIG5ldyBvYmplY3QgdGhhdCB3aWxsIGhhdmUgdGhlIHJpZ2h0IHNoYXBlIGZvciBwbG90dGluZywgbGFiZWxpbmcgb3VyIGNvbXBhcmlzb24gb2YgaW50ZXJlc3QsIGFuZCBzZXR0aW5nIHVwIG91ciBvdXRwdXQgZGlyZWN0b3J5IApgYGB7ciBQbG90U2V0dXAyfQpkZjwtIHJlc19XVFtvcmRlcihyZXNfV1QkcGFkaiksXSAjc2VsZWN0IG91ciBkYXRhIG9mIGludGVyZXN0CmRmIDwtIGFzLmRhdGEuZnJhbWUoZGYpICNjb252ZXJ0IG91ciBvYmplY3QgdHlwZQpkZiA8LSBjYmluZCgiaWQiID0gcm93Lm5hbWVzKGRmKSwgZGYpICNzZXQgcm93bmFtZXMgdG8gdmFsaWQgY29sdW1uCnN0cihkZikKCkNvbXBhcmlzb24gPC0gImtvLmNvbnRyb2xfdl93dC5jb250cm9sIgoKcGxvdFBhdGggPSAiZmlndXJlcy8iCmBgYAoKT25jZSB3ZSd2ZSBzZXR1cCB0aGUgYW5ub3RhdGlvbnMgd2UgbmVlZCwgd2UgY2FuIHByb2NlZWQgd2l0aCBnZW5lcmF0aW5nIHRoZSB2b2xjYW5vIHBsb3QsIGluY2x1ZGluZyBvdXIgdGhyZXNob2xkcy4KYGBge3IgVm9sY2Fub1Bsb3QsIG1lc3NhZ2U9RkFMU0UsIHdhcm5pbmc9RkFMU0V9CnBkZihmaWxlID0gcGFzdGUwKHBsb3RQYXRoLCdWb2xjYW5vUGxvdF8nLCBDb21wYXJpc29uLCAnLnBkZicpLCBvbmVmaWxlID0gRkFMU0UpCiMgSW5pdGlhbGl6ZSB0aGUgcGxvdCwgc2F2aW5nIGFzIG9iamVjdCAncCcgYW5kIHNwZWNpZnlpbmcgdGhlIHBsb3QgdHlwZSBhcyAnZ2VvbV9wb2ludCcKCnAgPC0gZ2dwbG90KGRmLCBhZXMoeCA9IGxvZzJGb2xkQ2hhbmdlLCB5ID0gLWxvZzEwKHBhZGopKSkgKwogICAgZ2VvbV9wb2ludChzaGFwZSA9IDIxLCBmaWxsPSAnZGFya2dyZXknLCBjb2xvcj0gJ2RhcmtncmV5Jywgc2l6ZSA9IDEpICsKICAgIHRoZW1lX2NsYXNzaWMoKSArCiAgICB4bGFiKCdMb2cyIGZvbGQtY2hhbmdlJykgKyB5bGFiKCctTG9nMTAgYWRqdXN0ZWQgcC12YWx1ZScpCgojIEFkZCB0aHJlc2hvbGQgbGluZXMKcCA8LSBwICsKICAgIGdlb21fdmxpbmUoCiAgICAgICAgeGludGVyY2VwdCA9IGMoMCwgLWxvZzIoZmMpLCBsb2cyKGZjKSksCiAgICAgICAgbGluZXR5cGUgPSBjKDEsIDIsIDIpLAogICAgICAgIGNvbG9yID0gYygnYmxhY2snLCAnYmxhY2snLCAnYmxhY2snKSkgKwogICAgZ2VvbV9obGluZSgKICAgICAgICB5aW50ZXJjZXB0ID0gLWxvZzEwKHB2YWwpLAogICAgICAgIGxpbmV0eXBlID0gMiwKICAgICAgICBjb2xvciA9ICdibGFjaycpCgojIEFkZCBUaXRsZSB0aGF0IGluY2x1ZGVzIGNvbXBhcmlzb24gbmFtZQpwIDwtIHAgKyBnZ3RpdGxlKGFzLmNoYXJhY3RlcihDb21wYXJpc29uKSkKCnByaW50KHApCmRldi5vZmYoKQpwCmBgYAoKCjxkZXRhaWxzPgogICAgPHN1bW1hcnk+KkNsaWNrIGZvciBjb2xvciBjb2RlZCB2b2xjYW5vIHBsb3QqPC9zdW1tYXJ5PgogICAgTm93IHdlIG5lZWQgdG8gW3N1YnNldCBvdXIgZGF0YV0oaHR0cHM6Ly93d3cuc3RhdG1ldGhvZHMubmV0L21hbmFnZW1lbnQvc3Vic2V0Lmh0bWwpIHRvIGxhYmVsIHRoZSBkYXRhcG9pbnRzIChnZW5lcykgdGhhdCBwYXNzIG91ciB0aHJlc2hvbGRzLgpgYGB7ciBQbG90U2V0dXAyYSwgbWVzc2FnZT1GQUxTRSwgd2FybmluZz1GQUxTRX0KZGYkZG90IDwtIHJlcCgzLCBucm93KGRmKSkKZGYkZG90W3doaWNoKGRmJHBhZGogPD0gcHZhbCAmIGRmJGxvZzJGb2xkQ2hhbmdlIDwgMCAmIGFicyhkZiRsb2cyRm9sZENoYW5nZSkgPj0gbG9nMihmYykpXSA9IDIKZGYkZG90W3doaWNoKGRmJHBhZGogPD0gcHZhbCAmIGRmJGxvZzJGb2xkQ2hhbmdlID4gMCAmIGFicyhkZiRsb2cyRm9sZENoYW5nZSkgPj0gbG9nMihmYykpXSA9IDEKZGYkc2lnIDwtIGRmJGRvdAoKI3Rha2UgdG9wIDUgdXAsIGRvd24sIHRoZW4gY29tYmluZSwgYXNzaWduIGxhYmVsCnRvcCA8LSByYmluZChoZWFkKHN1YnNldChkZiwgZGYkZG90ID09IDEpLCA1KSxoZWFkKHN1YnNldChkZiwgZGYkZG90ID09IDIpLCA1KSkKdG9wJGxhYmVsIDwtIHRvcCRpZApkZiA8LSBtZXJnZSh4ID0gZGYsIHkgPSB0b3BbLGMoJ2lkJywnbGFiZWwnKV0sIGJ5ID0gImlkIiwgYWxsLnggPSBUUlVFKQoKI2NvdW50IHRoZSBudW1iZXIgb2Ygc2lnbmlmaWNhbiB1cCBhbmQgZG93biBnZW5lcywgYXNzaWduIHZhbHVlIGZvciBsZWdlbmQKZGYkZG90IDwtIGZhY3RvcihkZiRkb3QsbGV2ZWxzID0gYygxLDIsMyksIGxhYmVscyA9IGMocGFzdGUwKCdVcDogJywgc3VtKGRmJGRvdCA9PSAxKSkscGFzdGUwKCdEb3duOiAnLCBzdW0oZGYkZG90ID09IDIpKSwnTlMnKSkKYGBgCgogICAgT25jZSB3ZSd2ZSBzZXR1cCB0aGUgYW5ub3RhdGlvbnMgd2UgbmVlZCwgd2UgY2FuIHByb2NlZWQgd2l0aCBnZW5lcmF0aW5nIHRoZSB2b2xjYW5vIHBsb3QuCgpgYGB7ciBWb2xjYW5vUGxvdDIsIG1lc3NhZ2U9RkFMU0UsIHdhcm5pbmc9RkFMU0V9CnBkZihmaWxlID0gcGFzdGUwKHBsb3RQYXRoLCdWb2xjYW5vUGxvdF9GYW5jaWVyJywgQ29tcGFyaXNvbiwgJy5wZGYnKSwgb25lZmlsZSA9IEZBTFNFKQoKcCA8LSBnZ3Bsb3QoZGYsIGFlcyh4ID0gbG9nMkZvbGRDaGFuZ2UsIHkgPSAtbG9nMTAocGFkaikpKSArCiAgICBnZW9tX3BvaW50KGFlcyhjb2xvciA9IGRmJGRvdCksIHNpemUgPSAxKSArCiAgICB0aGVtZV9jbGFzc2ljKCkgKwogICAgeGxhYignTG9nMiBmb2xkLWNoYW5nZScpICsgeWxhYignLUxvZzEwIGFkanVzdGVkIHAtdmFsdWUnKQojIHNwZWNpZnkgY29sb3JzIGZvciB1cC0vZG93bi0vbm9uc2lnbmlmaWNhbnQgZ2VuZXMKcCA8LSBwICsgc2NhbGVfY29sb3JfbWFudWFsKG5hbWUgPSAnJywgdmFsdWVzPWMoJyNCMzFCMjEnLCAnIzE0NjVBQycsICdkYXJrZ3JheScpKQojIGFkZCB0aHJlc2hvbCBsaW5lcwpwIDwtIHAgKwogICAgZ2VvbV92bGluZSgKICAgICAgICB4aW50ZXJjZXB0ID0gYygwLCAtbG9nMihmYyksIGxvZzIoZmMpKSwKICAgICAgICBsaW5ldHlwZSA9IGMoMSwgMiwgMiksCiAgICAgICAgY29sb3IgPSBjKCdibGFjaycsICdibGFjaycsICdibGFjaycpKSArCiAgICBnZW9tX2hsaW5lKAogICAgICAgIHlpbnRlcmNlcHQgPSAtbG9nMTAocHZhbCksCiAgICAgICAgbGluZXR5cGUgPSAyLAogICAgICAgIGNvbG9yID0gJ2JsYWNrJykKIyBBZGQgVGl0bGUgdGhhdCBpbmNsdWRlcyBjb21wYXJpc29uIG5hbWUKcCA8LSBwICsgZ2d0aXRsZShhcy5jaGFyYWN0ZXIoQ29tcGFyaXNvbikpCgpwcmludChwKQpkZXYub2ZmKCkKcApgYGAKCjwvZGV0YWlscz4KCkZvciBhZGRpdGlvbmFsIHZpc3VhbGl6YXRpb25zIGZvciBvdXIgREUgcmVzdWx0cywgdGhpcyBbSEJDIHR1dG9yaWFsXShodHRwczovL2hiY3RyYWluaW5nLmdpdGh1Yi5pby9ER0Vfd29ya3Nob3AvbGVzc29ucy8wNl9ER0VfdmlzdWFsaXppbmdfcmVzdWx0cy5odG1sKSBpbmNsdWRlcyBzb21lIG5pY2UgZXhhbXBsZXMuCgojIEhvdyB0byBhbm5vdGF0ZSB0aGUgcmVzdWx0cyB0YWJsZQoKSXQgY2FuIGJlIHVzZWZ1bCB0byBhbm5vdGF0ZSBvdXIgcmVzdWx0cyB0YWJsZSB3aXRoIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gdG8gbWFrZSB0aGVtIGVhc2llciB0byBpbnRlcnByZXQsIHN1Y2ggYXMgYWRkaW5nIGFkZGl0aW9uYWwgZ2VuZSBpbmZvcm1hdGlvbiBvciBiZXR0ZXIgc3VtbWFyaXppbmcgb3VyIERFIHJlc3VsdHMuCgojIyBTdW1tYXJpemluZyBvdXIgREUgcmVzdWx0cwoKVG8gZ2VuZXJhdGUgYSBnZW5lcmFsIHN1bW1hcnkgb2YgdGhlIERFIHJlc3VsdHMsIHdlIGNhbiB1c2UgdGhlIGBzdW1tYXJ5YCBmdW5jdGlvbiB0byBnZW5lcmF0ZSBhIGJhc2ljIHN1bW1hcnkgYnkgREVTZXEyLgoKSG93ZXZlciwgd2UgY2FuIGFsc28gdXNlIGNvbmRpdGlvbmFsIHN0YXRlbWVudHMgdG8gZGV0ZXJtaW5lIHRoZSBudW1iZXIgb2YgZ2VuZXMgdGhhdCBwYXNzIG91ciB0aHJlc2hvbGRzIGZvciBlYWNoIGNvbXBhcmlzb24sIHdoaWNoIG1pZ2h0IGJlIG1vcmUgaW5mb3JtYXRpdmUuCgoqW1F1ZXN0aW9uXTogSG93IHdvdWxkIHdlIGlkZW50aWZ5IHRoZSBudW1iZXIgb2YgZ2VuZXMgd2l0aCBhZGp1c3RlZCBwLXZhbHVlcyA8IDAuMDUgYW5kIGEgZm9sZC1jaGFuZ2UgYWJvdmUgMS41IChvciBiZWxvdyAtMS41KT8qIAoKYGBge3IgU3RhdFNpZ0dlbmVzMn0KI3N1bW1hcnkocmVzX1dUKQpzdW0ocmVzX1dUJHBhZGogPCAwLjA1ICYgYWJzKHJlc19XVCRsb2cyRm9sZENoYW5nZSkgPj0gbG9nMigxLjUpLCBuYS5ybSA9IFRSVUUpCnN1bShyZXNfVHgkcGFkaiA8IDAuMDUgJiBhYnMocmVzX1R4JGxvZzJGb2xkQ2hhbmdlKSA+PSBsb2cyKDEuNSksIG5hLnJtID0gVFJVRSkKYGBgCkhvdyBkbyB0aGUgbnVtYmVyIG9mIERFIGdlbmVzIGNvbXBhcmUgdG8gd2hhdCB3ZSBvYnNlcnZlZCBmcm9tIHRoZSBQQ0EgcGxvdHM/CgojIyMjIENob3NpbmcgdGhyZXNob2xkcwoKVGhyZXNob2xkaW5nIG9uIGFkanVzdGVkIHAtdmFsdWVzIDwgMC4wNSBpcyBhIHN0YW5kYXJkIHRocmVzaG9sZCwgYnV0IGRlcGVuZGluZyBvbiB0aGUgcmVzZWFyY2ggcXVlc3Rpb24gYW5kL29yIGhvdyB0aGUgcmVzdWx0cyB3aWxsIGJlIHVzZWQsIG90aGVyIHRocmVzaG9sZHMgbWlnaHQgYmUgcmVhc29uYWJsZS4KCiMjIyMjIEV4ZXJjaXNlCgpIb3cgd291bGQgd2UgY291bnQgdGhlIG51bWJlciBvZiBnZW5lcyB3aXRoIGEgbW9yZSBzdHJpbmdlbnQgc2lnbmlmaWNhbmNlIHRocmVzaG9sZCAoaS5lLiBgcGFkamAgPCAwLjAxKSwgaWdub3JpbmcgZm9sZC1jaGFuZ2U/IEhvdyBtYW55IERFIGdlbmVzIHdvdWxkIHdlIGhhdmUgd2l0aCB0aGVzZSB0aHJlc2hvbGRzPwpgYGB7ciBTdGF0U2lnR2VuZXN9CnN1bShyZXNfV1QkcGFkaiA8IDAuMDEsIG5hLnJtID0gVFJVRSkKYGBgCgpJZiB3ZSB0aHJlc2hvbGQgb25seSBvbiBzaWduaWZpY2FuY2UsIHdlIHN0aWxsIGlkZW50aWZ5IGxlc3MgREUgZ2VuZXMgdGhhbiB0aGUgNjA1NyBpZGVudGlmaWVkIGluIHRoZSBwYXBlci4gSG93IHNob3VsZCB3ZSBpbnRlcnByZXQgdGhlc2UgZGlmZmVyZW5jZXM/IEFyZSB3ZSBpbiBkYW5nZXIgb2YgbWlzc2luZyByZWxldmFudCBnZW5lcyBvciwgZHVlIHRvIERFU2VxMidzIHN0cmluZ2VuY3ksIGFyZSB3ZSBiZXR0ZXIgcHJvdGVjdGVkIGFnYWluc3QgaXJyZWxldmFudCBnZW5lcz8gT25lIG9mIHRoZSBhdXRob3JzIG9mIERFU2VxMiwgd3JvdGUgdGhpcyBbYmxvZyBwb3N0IHRoYXQgZGV0YWlsZWQgZGlmZmVyZW5jZXMgYmV0d2VlbiBERVNlcTIgYW5kIEVkZ2VSIF0oaHR0cHM6Ly9taWtlbG92ZS53b3JkcHJlc3MuY29tLzIwMTYvMDkvMjgvZGVzZXEyLW9yLWVkZ2VyLykgYnV0IHRoaXMgW3JldmlldyBvZiBtdWx0aXBsZSBERSB0b29scyBieSBDb3N0YS1TaWx2YSwgRG9taW5ndWVzLCBhbmQgTWFydGlucyBMb3Blc10oaHR0cHM6Ly93d3cubmNiaS5ubG0ubmloLmdvdi9wbWMvYXJ0aWNsZXMvUE1DNTczOTQ3OS8pIG1heSBhbHNvIGJlIHVzZWZ1bCBmb3IgbWFraW5nIGNob2ljZXMgZm9yIHlvdXIgb3duIGRhdGEuCgoKIyMjIyBTdWJzZXR0aW5nIHNpZ25pZmljYW50IGdlbmVzCgo8ZGV0YWlscz4KICAgIDxzdW1tYXJ5PipDbGljayBmb3IgY29kZSB0byBnZW5lcmF0ZSBhIHRhYmxlIG9mIG9ubHkgREUgZ2VuZXMqPC9zdW1tYXJ5PgogICAgWW91IG1heSBiZSBpbnRlcmVzdGVkIGluIGlkZW50aWZ5aW5nIG9ubHkgdGhlIGdlbmVzIHRoYXQgcGFzcyB5b3VyIHNpZ25pZmljYW5jZSB0aGVzaG9sZHMuIEEgdXNlZnVsIHdheSB0byBkbyB0aGlzIGlzIHRvIGNvbmRpdGlvbmFsbHkgc3Vic2V0IHlvdXIgcmVzdWx0cy4KCgpgYGB7ciBDb25kaXRpb25hbFN1YnNldCwgZXZhbD1GQUxTRX0KcmVzX3NpZyA8LSBuYS5vbWl0KHJlc19XVCkKcmVzX3NpZyA8LSByZXNfc2lnW3doaWNoKHJlc19zaWckcGFkaiA8IDAuMDUgJiBhYnMocmVzX3NpZyRsb2cyRm9sZENoYW5nZSkgPj0gbG9nMigxLjUpKSwgXQpoZWFkKHJlc19zaWcpCmBgYAogICAgRm9yIG1vcmUgZGV0YWlscyBhYm91dCBzdWJzZXR0aW5nIHRhYmxlcyBpbiBSLCB3ZSByZWNvbW1lbmQgcmV2aWV3aW5nIHRoZSBbRGF0YSBDYXJwZW50cnkgbWFuaXB1bGF0aW5nIGFuZCBhbmFseXppbmcgZGF0YSBtb2R1bGVdKGh0dHBzOi8vZGF0YWNhcnBlbnRyeS5vcmcvUi1lY29sb2d5LWxlc3Nvbi8wMy1kcGx5ci5odG1sKS4KICAgIFdlIGNhbiBhbHNvIGFubm90YXRlIG91ciByZXN1bHRzIHRvIGluY2x1ZGUgYSBjb2x1bW4gdGhhdCBpZGVudGlmaWVzIG91ciBzaWduaWZpY2FudCBnZW5lcy4KCmBgYHtyIENvbmRpdGlvbmFsQW5ubywgZXZhbD1GQUxTRX0KcmVzX1dUX0RFIDwtIHJlc19XVCAjIGNvcHkgdGFibGUKIyBhZGQgYSBjb2x1bW4gYW5kIGFzc2lnbiBhbGwgZ2VuZXMgYXJlIG5vbi1zaWduaWZpY2FuY2UKcmVzX1dUX0RFJENhbGwgPC0gcmVwKEZBTFNFLCBsZW5ndGgocmVzX1dUJGJhc2VNZWFuKSkKCiMgY2hhbmdlICdDYWxsJyBjb2x1bW4gdG8gVFJVRSBpZiBtZWV0cyBjb25kaXRpb25zIGZvciBzaWduaWZpY2FudCBkaWZmZXJlbmNlcwpyZXNfV1RfREVbd2hpY2goIWlzLm5hKHJlc19XVF9ERSRwYWRqKSAmIHJlc19XVF9hbm5vJHBhZGogPCAwLjA1ICYgYWJzKHJlc19XVF9ERSRsb2cyRm9sZENoYW5nZSkgPj0gbG9nMigxLjUpKSwgXSRDYWxsIDwtIFRSVUUKCiMgcmVvcmRlciB0YWJsZSB0byByYW5rIHNpZ25pZmljYW50IGdlbmVzIGF0IHRoZSB0b3AKcmVzX1dUX0RFIDwtIHJlc19XVF9ERVtvcmRlcigtcmVzX1dUX0RFJENhbGwpLF0KYGBgCjwvZGV0YWlscz4KCgojIyBBZGRpbmcgZ2Vub21lIGFubm90YXRpb25zCgpCaW9jb25kdWN0b3IgcHJvdmlkZXMgbWFueSB0b29scyBhbmQgcmVzb3VyY2VzIHRvIGZhY2lsaXRhdGUgYWNjZXNzIHRvIFtnZW5vbWljIGFubm90YXRpb24gcmVzb3VyY2VzXShodHRwOi8vYmlvY29uZHVjdG9yLm9yZy9wYWNrYWdlcy9kZXZlbC93b3JrZmxvd3MvdmlnbmV0dGVzL2Fubm90YXRpb24vaW5zdC9kb2MvQW5ub3RhdGlvbl9SZXNvdXJjZXMuaHRtbCkuCgpXZSBjYW4gYWNjZXNzIGFkZGl0aW9uYWwgZ2Vub21pYyBhbm5vdGF0aW9ucyB1c2luZyB0aGUgW2BiaW9NYXJ0YCBwYWNrYWdlXShodHRwczovL2Jpb2NvbmR1Y3Rvci5vcmcvcGFja2FnZXMvcmVsZWFzZS9iaW9jL2h0bWwvYmlvbWFSdC5odG1sKS4gVG8gaWRlbnRpZnkgIHdlJ2xsIHN0cnVjdHVyZSBvdXIgJ3F1ZXJ5JyBvciBzZWFyY2ggb2YgdGhlIGJpb01hcnQgcmVzb3VyY2VzIHRvIHVzZSB0aGUgW0VOU0VNQkwgaWRdKGh0dHBzOi8vbS5lbnNlbWJsLm9yZy9pbmZvL2dlbm9tZS9nZW5lYnVpbGQvZ2VuZV9uYW1lcy5odG1sKSBmcm9tIG91ciBhbGlnbm1lbnQgdG8gYWRkIHRoZSBnZW5lIHN5bWJvbHMgYW5kIGdlbmUgZGVzY3JpcHRpb24gZm9yIGVhY2ggZ2VuZS4KCiMjIyBHZW5lIHN5bWJvbHMgdmVyc3VzIEdlbmUgSURzCgpTaW5jZSBVQ1NDIGFuZCBFTlNFTUJMIGFyZSB0d28gZGlmZmVyZW5jZSByZWZlcmVuY2UgYnVpbGRzLCBub3QgYWxsIGdlbmVzIGFyZSBwcmVzZW50IGluIGJvdGggcmVmZXJlbmNlcywgYXMgb3V0bGluZWQgaW4gW3RoaXMgY29tcHJlaGVuc2l2ZSByZXZpZXcgb2YgcmVmZXJlbmNlIGdlbm9tZXMgYnkgWmhhbyAmIFpoYW5nXShodHRwczovL2JtY2dlbm9taWNzLmJpb21lZGNlbnRyYWwuY29tL2FydGljbGVzLzEwLjExODYvczEyODY0LTAxNS0xMzA4LTgpLiBBZGRpdGlvbmFsbHksIHNpbmNlIGdlbmUgc3ltYm9scyBjYW4gY2hhbmdlIG92ZXIgdGltZSBvciBiZSBhbWJpZ3VvdXMgd2UgdXNlIGFuZCByZWNvbW1lbmQgdXNpbmcgdGhlIEVNU0VNQkwgcmVmZXJlbmNlIGdlbm9tZSBhbmQgRU5TRU1CTCBpZHMgZm9yIGFsaWdubWVudHMuCgpUbyBwcm9jZWVkIHdpdGggb3VyIEJpb01hcnQgcXVlcnksIHdlIHdpbGwgZmlyc3QgbG9hZCB0aGUgYmlvbWFSdCBsaWJyYXJ5ICYgY2hvb3NlIHdoYXQgcmVmZXJlbmNlIHdlIHdhbnQgdG8gYWNjZXNzLiBGb3IgYSBtb3JlIGRldGFpbGVkIHdhbGsgdGhyb3VnaCBvZiB1c2luZyBiaW9tYVJ0LCBbdGhpcyB0cmFpbmluZyBtb2R1bGVdKGh0dHBzOi8vYmlvaW5mb3JtYXRpY3MtY29yZS1zaGFyZWQtdHJhaW5pbmcuZ2l0aHViLmlvL2NydWstc3VtbWVyLXNjaG9vbC0yMDE5L1JOQXNlcS9odG1sLzA1X0Fubm90YXRpb25fYW5kX1Zpc3VhbGlzYXRpb24uaHRtbCkgbWlnaHQgYmUgdXNlZnVsLCBpbmNsdWRpbmcgd2hhdCB0byBkbyB3aGVuIGFubm90YXRpb25zIGFyZSBub3QgMToxIG1hcHBpbmdzLgoKYGBge3IgQWRkQW5ub3RhdGlvbnMxLCB3YXJuaW5nPUZBTFNFIH0KbGlicmFyeSgiYmlvbWFSdCIpCgojIHVzaW5nIGFuIGFyY2hpdmVkIGhvc3Qgc2luY2UgbXkgUi9CaW9jb25kdWN0b3IgdmVyc2lvbnMgYXJlIG91dCBvZiBkYXRlCmxpc3RNYXJ0cygpCgojIGNob29zZSBlbnNlbWJsIGRhdGFiYXNlIHNpbmNlIGhhdmUgRU5TRU1CbCBnZW5lIGlkcywgdXNpbmcgCmVuc2VtYmwgPC0gdXNlTWFydCgiRU5TRU1CTF9NQVJUX0VOU0VNQkwiKQoKIyBzZWFyY2ggZm9yIG1vdXNlCnNlYXJjaERhdGFzZXRzKG1hcnQgPSBlbnNlbWJsLCBwYXR0ZXJuID0gIm11cyIpCmBgYAoKCipOb3RlIHRoYXQgdGhpcyBwcm9jZXNzIHRha2VzIHNvbWUgdGltZSBhbmQgd2lsbCB0YWtlIHVwIGEgbGFyZ2VyIGFtb3VudCBvZiB3b3JraW5nIG1lbW9yeSBzbyBwcm9jZWVkIHdpdGggY2F1dGlvbiBpZiB5b3UgdHJ5IHRvIHJ1biB0aGVzZSBjb21tYW5kcyBvbiBhIGxhcHRvcCB3aXRoIGxlc3MgdGhhbiA0RyBvZiBtZW1vcnkqCmBgYHtyIFB1bGxtYXJ0LCB3YXJuaW5nPUZBTFNFfQojIHJlZGVmaW5lIGVuc2VtYmwgd2l0aCBzcGVjaWVzIHNwZWNpZmljIGRhdGFiYXNlCmVuc2VtYmwgPC0gdXNlRGF0YXNldCgibW11c2N1bHVzX2dlbmVfZW5zZW1ibCIsIG1hcnQ9ZW5zZW1ibCkKYGBgCgoKVG8gaWRlbnRpZnkgcG9zc2libGUgKipmaWx0ZXJzKiogdG8gcmVzdHJpY3Qgb3VyIGRhdGEsIHdlIGNhbiB1c2UgdGhlIGBsaXN0RmlsdGVyc2AgZnVuY3Rpb24uIFRvIGlkZW50aWZ5IHRoZSAqKmF0dHJpYnV0ZXMqKiB3ZSB3YW50IHRvIHJldHJpdmUsIHdlIGNhbiB1c2UgdGhlIGBsaXN0QXR0cmlidXRlc2AgZnVuY3Rpb24uIFRoZXJlIGFyZSBhbHNvIFtzZWFyY2ggZnVuY3Rpb25zXShodHRwczovL2Jpb2NvbmR1Y3Rvci5vcmcvcGFja2FnZXMvcmVsZWFzZS9iaW9jL3ZpZ25ldHRlcy9iaW9tYVJ0L2luc3QvZG9jL2FjY2Vzc2luZ19lbnNlbWJsLmh0bWwjaG93LXRvLWJ1aWxkLWEtYmlvbWFydC1xdWVyeSkgdG8gaGVscCBuYXJyb3cgZG93biB0aGUgYXZhaWxhYmxlIG9wdGlvbnMuCmBgYHtyIEFkZEFubm90YXRpb25zMiwgd2FybmluZz1GQUxTRSwgZXZhbD1GQUxTRX0KaGVhZChsaXN0RmlsdGVycyhtYXJ0ID0gZW5zZW1ibCksIG4gPSAyMCkKaGVhZChsaXN0QXR0cmlidXRlcyhlbnNlbWJsKSwgbiA9IDMwKQpgYGAKCk5leHQsIHdlJ2xsIFtidWlsZCBvdXIgcXVlcnldKGh0dHBzOi8vYmlvY29uZHVjdG9yLm9yZy9wYWNrYWdlcy9yZWxlYXNlL2Jpb2MvdmlnbmV0dGVzL2Jpb21hUnQvaW5zdC9kb2MvYWNjZXNzaW5nX2Vuc2VtYmwuaHRtbCNob3ctdG8tYnVpbGQtYS1iaW9tYXJ0LXF1ZXJ5KSB0byByZXRyaXZlIHRoZSBpbmZvcm1hdGlvbiB3ZSB3YW50IHRvIGFkZCB0byBvdXIgREUgcmVzdWx0cyB0YWJsZS4KYGBge3IgQWRkQW5vdGF0aW9uMywgd2FybmluZz1GQUxTRX0KIyMgd2Fzbid0IHdvcmtpbmcgZm9yIG15IHZlcnNpb24gb2YgYmlvbWFSdCBidXQgbWlnaHQgd29yayBmb3IgeW91CkdlbmVLZXkgPC0gZ2V0Qk0oYXR0cmlidXRlcz1jKCdlbnNlbWJsX2dlbmVfaWQnLCAnZXh0ZXJuYWxfZ2VuZV9uYW1lJyksCiAgICAgIGZpbHRlcnMgPSAnZW5zZW1ibF9nZW5lX2lkJywKICAgICAgdmFsdWVzID0gcm93Lm5hbWVzKGFzc2F5KGRkcykpLAogICAgICBtYXJ0ID0gZW5zZW1ibCkgIyB3aWxsIHRha2Ugc29tZSB0aW1lIHRvIHJ1bgoKaGVhZChHZW5lS2V5KQpgYGAKCgpOb3cgdGhhdCB3ZSBoYXZlIHRoZSBFTlNFTUJMIGluZm9ybWF0aW9uIGFuZCBhIGdlbmUgc3ltYm9sIHRvIG1hdGNoIHRvIG91ciByZXN1bHRzLCB3ZSBjYW4gYWRkIHRoaXMgdG8gb3VyIERFIHJlc3VsdHMgdGFibGUuCmBgYHtyIHVwZGF0ZURFVGFibGV9CnJlc19XVF9hbm5vIDwtIHJlc19XVCAjIGNvcHkgdGFibGUKcmVzX1dUX2Fubm8gPC0gY2JpbmQoZ2VuZXM9cm93Lm5hbWVzKHJlc19XVF9hbm5vKSwgcmVzX1dUX2Fubm9bICxjKDE6NildKQpyZXNfV1RfYW5ubyA8LSBhcy5kYXRhLmZyYW1lKHJlc19XVF9hbm5vKQoKIyBjb21iaW5lIHRoZSB0d28gdGFibGVzIHVzaW5nIHRoZSBtZXJnZSBmdW5jdGlvbiAoc2ltaWxhciB0byBqb2luIGZyb20gYHRpZHl2ZXJzZWApCnJlc19XVF9hbm5vIDwtIG1lcmdlKEdlbmVLZXksIHJlc19XVF9hbm5vLCBieS54ID0gImV4dGVybmFsX2dlbmVfbmFtZSIsIGJ5Lnk9ImdlbmVzIiwgYWxsLnggPSBGQUxTRSwgYWxsLnkgPSBUUlVFKQpoZWFkKHJlc19XVF9hbm5vKQpgYGAKCk5vdGljZSB0aGF0IG5vdCBhbGwgZ2VuZXMgd2VyZSBhbm5vdGF0ZWQgd2l0aCBhbiBFTlNFTUJsIGdlbmUgaWQgb3IgZ2VuZSBkZXNjcmlwdGlvbi4gV2hpbGUgd2UgYXJlIGFibGUgdG8gYW5ub3RhdGUgb3VyIHJlc3VsdHMsIHdlIHNob3VsZCBiZSB2ZXJ5IGNhdXRpb3VzIGFzIHRoZSBnZW5lIHN5bWJvbCBpcyBub3QgYSBnb29kIHVuaXF1ZSBpZGVudGlmaWVyIHBsdXMgd2UgZGlkIG5vdCB1c2UgYSBVQ1NDIGFubm90YXRpb24gcmVzb3VyY2Ugc28gdGhlIEhVR08gZ2VuZSBzeW1ib2wgbWF5IG5vdCBhbHdheXMgbWF0Y2guIEhvd2V2ZXIsIHRoaXMgY29kZSBpcyBzaW1pbGFyIHRvIHRoZSBzdGVwcyBuZWVkZWQgdG8gYW5ub3RhdGUgRU5TRU1CTCBpZCBiYXNlZCByZXN1bHRzLCBsaWtlIHdoYXQgd291bGQgaGF2ZSBiZWVuIGdlbmVyYXRlZCBmcm9tIHllc3RlcmRheSdzIGFsaWdubWVudHMsIHdpdGggbW9yZSBpbnRlcnByZXRhYmxlIGdlbmUgc3ltYm9scy4KCioqTm90ZSoqOiBGb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgYmlvTWFydCwgcGxlYXNlIGNvbnN1bHQgdGhlIFtFTlNFTUJMIGJpb01hcnQgdmlnbmV0dGVdKGh0dHBzOi8vYmlvY29uZHVjdG9yLm9yZy9wYWNrYWdlcy9yZWxlYXNlL2Jpb2MvdmlnbmV0dGVzL2Jpb21hUnQvaW5zdC9kb2MvYWNjZXNzaW5nX2Vuc2VtYmwuaHRtbCkgb3IgdGhlIGJyb2FkZXIgW0Jpb2NvbmR1Y3RvciBBbm5vdGF0aW9uIFJlc291cmNlcyB2aWduZXR0ZSBdKGh0dHA6Ly9iaW9jb25kdWN0b3Iub3JnL3BhY2thZ2VzL2RldmVsL3dvcmtmbG93cy92aWduZXR0ZXMvYW5ub3RhdGlvbi9pbnN0L2RvYy9Bbm5vdGF0aW9uX1Jlc291cmNlcy5odG1sKS4KCiMgT3V0cHV0dGluZyByZXN1bHRzIHRvIGZpbGUKCkEga2V5IGFzcGVjdCBvZiBvdXIgYW5hbHlzaXMgaXMgcHJlc2VydmluZyB0aGUgcmVsZXZhbnQgZGF0YXNldHMgZm9yIGJvdGggb3VyIHJlY29yZHMgYW5kIGZvciBkb3duc3RyZWFtIGFwcGxpY2F0aW9ucy4KCiMjIENvdW50IHRhYmxlcwoKVGhlIG1vc3QgcmVsZXZhbnQgY291bnQgdGFibGVzIGFyZSB0aGUgcmF3LCBmaWx0ZXJlZCBjb3VudCB0YWJsZSB0aGF0IHdlIHVzZWQgYXMgdGhlIGlucHV0IGZvciBvdXIgYW5hbHlzaXMgYW5kIHRoZSBybG9nIG5vcm1hbGl6ZWQgY291bnQgdGFibGUgdGhhdCB3ZSB1c2VkIGZvciBvdXIgcXVhbGl0eSBjb250cm9sIHZpc3VhbGl6YXRpb25zLgoKRmlyc3QsIHdlJ2xsIHNldHVwIGEgbmV3IGRpcmVjdG9yeSBmb3Igb3VyIG91dHB1dCB0YWJsZXMuCmBgYHtyIE91dHB1dFRhYmxlRGlyfQpkaXIuY3JlYXRlKCJ0YWJsZXMiLCBzaG93V2FybmluZ3MgPSBGQUxTRSkKYGBgCgpUbyBvdXRwdXQgdGhlIHJhdyBjb3VudHMsIHdlIHdpbGwgbmVlZCB0byB1c2UgdGhlIGBjb3VudHNgIGZ1bmN0aW9uIHRvIGFjY2VzcyB0aGUgY291bnQgdGFibGUgZnJvbSB3aXRoaW4gaXRzIGxhcmdlciBgREVTZXFEYXRhU2V0YCBvYmplY3QuCmBgYHtyIE91dHB1dENvdW50c1Jhd30Kd3JpdGUuY3N2KGNvdW50cyhkZHMsIG5vcm1hbGl6ZWQgPSBGQUxTRSksIGZpbGU9InRhYmxlcy9ERVNlcTJfcmF3X2NvdW50cy5jc3YiKQpgYGAKClRoZW4gd2UnbGwgb3V0cHV0IHRoZSBybG9nIGNvdW50IHRhYmxlLCB1c2luZyB0aGUgYGFzc2F5YCBmdW5jdGlvbiB0byBhY2Nlc3MgdGhlIG5vcm1hbGl6ZWQgY291bnQgdGFibGUgZnJvbSB3aXRoaW4gaXRzIGxhcmdlciBgREVTZXFEYXRhU2V0YCBvYmplY3QuCmBgYHtyIE91dHB1dENvdW50c1Jsb2d9CndyaXRlLmNzdihhc3NheShybGQpLCBmaWxlPSJ0YWJsZXMvREVTZXEyX3Jsb2dOb3JtYWxpemVkX2NvdW50cy5jc3YiKQpgYGAKCiMjIERFIHJlc3VsdHMgdGFibGUKCk5leHQgd2UnbGwgd3JpdGUgb3V0IG91ciBERSByZXN1bHRzIGZvciB0aGUgS0QgY29tcGFyaXNvbiB0byBmaWxlLCBzaW5jZSB3ZSBhZGRlZCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHRvIHRoYXQgdGFibGUuCmBgYHtyIERFUmVzdWx0c091cHV0fQp3cml0ZS5jc3YocmVzX1dUX2Fubm8sCiAgICAgICAgICByb3cubmFtZXMgPSBGQUxTRSwKICAgICAgICAgIG5hID0gIi4iLAogICAgICAgICAgZmlsZT0idGFibGVzL0RFUmVzdWx0c19rby5jb250cm9sX3Zfd3QuY29udHJvbF9hbm5vdGF0ZWQuY3N2IikKYGBgCgpJZiB3ZSBnZW5lcmF0ZWQgYW5vdGhlciBjb21wYXJzaW9uLCB3ZSBjb3VsZCByZXBlYXQgb3VyIGFubm90YXRpb25zIG9yIHdyaXRlIHRoZSBERSByZXN1bHRzIGRpcmVjdGx5IHRvIGZpbGUuCgpgYGB7ciBERVJlc3VsdHNPdXB1dDJ9CndyaXRlLmNzdihyZXNfVHgsCiAgICAgICAgICByb3cubmFtZXMgPSBGQUxTRSwKICAgICAgICAgIG5hID0gIi4iLAogICAgICAgICAgZmlsZT0idGFibGVzL0RFUmVzdWx0c19rby5UeF92X3d0LlR4LmNzdiIpCmBgYAoKCiMgU3VtbWFyeQoKSW4gdGhpcyBzZWN0aW9uLCB3ZTogICAKCiogR2VuZXJhdGVkIGEgdm9sY2FubyBwbG90IGZvciBvdXIgZGlmZmVyZW50aWFsIGV4cHJlc3Npb24gcmVzdWx0cyAgIAoqIFN1bW1hcml6ZWQgb3VyIGRpZmZlcmVudGlhbCBleHByZXNzaW9uIHJlc3VsdHMgICAgCiogRGlzY3Vzc2VkIGNob29zaW5nIHRocmVzaG9sZHMgICAgCiogQW5ub3RhdGVkIG91ciB0YWJsZXMgb2YgcmVzdWx0cyB0byBtYXAgZ2VuZSBJRHMgdG8gZ2VuZSBzeW1ib2xzICAgIAoqIFNhdmVkIG91ciByZXN1bHRzIHRvIGZpbGUgICAgCgoKIyBLZXkgdGFrZWF3YXlzCgpPdmVyYWxsLCB3ZSd2ZSBydW4gdGhyb3VnaCBtb3N0IG9mIHRoZSBidWlsZGluZyBibG9ja3MgbmVlZGVkIHRvIHJ1biBhIGRpZmZlcmVudGlhbCBleHByZXNzaW9uIGFuYWx5c2lzIGFuZCBob3BlZnVsbHkgYnVpbHQgdXAgYSBiZXR0ZXIgdW5kZXJzdGFuZGluZyBvZiBob3cgZGlmZmVyZW50aWFsIGV4cHJlc3Npb24gY29tcGFyaXNvbnMgd29yaywgcGFydGljdWxhcmx5IGhvdyBleHBlcmltZW50YWwgZGVzaWduIGNhbiBpbXBhY3Qgb3VyIHJlc3VsdHMuICAKCldoYXQgdG8gY29uc2lkZXIgbW92aW5nIGZvcndhcmQ6ICAgIAoKKiBIb3cgY2FuIEkgY29udHJvbCBmb3IgdGVjaG5pY2FsIHZhcmlhdGlvbiBpbiBteSBleHBlcmltZW50YWwgZGVzaWduPyAgICAgIAoqIEhvdyBtdWNoIHZhcmlhdGlvbiBpcyBleHBlY3RlZCB3aXRoIGEgdHJlYXRtZW50IGdyb3VwPyAgICAgCiogV2hhdCBpcyBteSBSTkEgcXVhbGl0eSwgYW5kIGhvdyBjYW4gdGhhdCBiZSBvcHRpbWl6ZWQ/ICAgIAoqIEFyZSB0aGVyZSBxdWFsaXR5IGNvbmNlcm5zIGZvciBteSBzZXF1ZW5jaW5nIGRhdGE/CiogV2hhdCBjb21wYXJpc29ucyBhcmUgcmVsZXZhbnQgdG8gbXkgYmlvbG9naWNhbCBxdWVzdGlvbj8gICAgCiogQXJlIHRoZXJlIGNvdmFyaWF0ZXMgdGhhdCBzaG91bGQgYmUgY29uc2lkZXJlZD8gICAgIAoqIFdoYXQgd2lsbCBhIGRpZmZlcmVudGlhbCBleHByZXNzaW9uIGFuYWx5c2lzIHRlbGwgbWU/CgoKKipMZXQncyBwYXVzZSBoZXJlIGZvciBnZW5lcmFsIHF1ZXN0aW9ucyBhYm91dCB0aGUgbGFzdCB0d28gZGF5cyBvZiBjb250ZW50KioKCi0tLQoKIyBFeHRlbnNpb24gLSB3aGF0IGNhbiB3ZSBkbyB3aXRoIG91ciBERSByZXN1bHRzPwoKTm93IHRoYXQgd2UgaGF2ZSBvdXIgREUgcmVzdWx0cywgaGF2ZSB3ZSBhZGRyZXNzIHRoZSBiaW9sb2dpY2FsIHF1ZXN0aW9uIHJlbGV2YW50IHRvIHRoZSBhdXRob3JzIG9mIHRoZSBbb3JpZ2luYWwgcGFwZXJdKGh0dHA6Ly93d3cubmNiaS5ubG0ubmloLmdvdi9wdWJtZWQvMjU0NjQ4NDkpPyBPbiB0aGUgb25lIGhhbmQsIHllcyAtIHdlIG5vdyBoYXZlIHR3byB0YWJsZXMgb2YgZ2VuZXMgdGhhdCBhcmUgaW1wYWN0ZWQgYnkgY2hhbmdlIGluIE1vdjEwIGV4cHJlc3Npb24uIEJ1dCB3aXRoIHR3byBsaXN0cyBvZiBnZW5lcyBhbG9uZSwgaXQgY2FuIGJlIGRpZmZpY3VsdCB0byBmaW5kIHBhdHRlcm5zIG9yIHVuZGVyc3RhbmQgYnJvYWRlciBiaW9sb2dpY2FsIGltcGFjdHMuCgpXaGF0IGlmIHdlIHdhbnRlZCB0byBmaW5kIG91dCB3aGF0IGdlbmVzIHdlcmUgc2lnbmlmYW50IGluICpib3RoKiBjb21wYXJpc29ucz8gVGhlIGBpbnRlcnNlY3RgIGZ1bmN0aW9uLCBzdWNoIGFzIGltcGxpbWVudGVkIGFzIFtwYXJ0IG9mIHRoZSBkcGx5ciBwYWNrYWdlXShodHRwczovL3d3dy5kYXRhc2NpZW5jZW1hZGVzaW1wbGUuY29tL2ludGVyc2VjdC1mdW5jdGlvbi1yLXVzaW5nLWRwbHlyLWludGVyc2VjdGlvbi1kYXRhLWZyYW1lcy8pIHdvdWxkIGJlIHVzZWZ1bCB0byBpZGVudGlmeSBzaGFyZWQgc2lnbmlmaWNhbnQgZ2VuZXMuIEEgW3Zlbm4gZGlhZ3JhbV0oaHR0cHM6Ly93d3cuci1ncmFwaC1nYWxsZXJ5LmNvbS8xNC12ZW5uLWRpYWdyYW1tLmh0bWwpIGNvdWxkIGJlIGEgd2F5IHRvIHZpc3VhbGl6ZSB0aGVzZSBvdmVybGFwcy4gCgpBIHdheSB0byBkZXRlcm1pbmUgcG9zc2libGUgW2Jyb2FkZXIgYmlvbG9naWNhbCBpbnRlcnByZXRhdGlvbnNdKGh0dHBzOi8vd3d3LmViaS5hYy51ay90cmFpbmluZy1iZXRhL29ubGluZS9jb3Vyc2VzL2Z1bmN0aW9uYWwtZ2Vub21pY3MtaWktY29tbW9uLXRlY2hub2xvZ2llcy1hbmQtZGF0YS1hbmFseXNpcy1tZXRob2RzL2Jpb2xvZ2ljYWwtaW50ZXJwcmV0YXRpb24tb2YtZ2VuZS1leHByZXNzaW9uLWRhdGEtMi8pIGZyb20gdGhlIG9ic2VydmVkIERFIHJlc3VsdHMsIGlzIGZ1bmN0aW9uYWwgZW5yaWNobWVudHMuIFRoZXJlIGFyZSBtYW55IG9wdGlvbnMsIHN1Y2ggYXMgc29tZSBpbmNsdWRlZCBpbiB0aGlzIFtkaXNjdXNzaW9uIHRocmVhZF0oaHR0cHM6Ly93d3cucmVzZWFyY2hnYXRlLm5ldC9wb3N0L0hvd19jYW5fSV9hbmFseXplX2Ffc2V0X29mX0RFR3NfZGlmZmVyZW50aWFsbHlfZXhwcmVzc2VkX2dlbmVzX3RvX29idGFpbl9pbmZvcm1hdGlvbl9mcm9tX3RoZW0pLiBPdGhlciBjb21tb24gZnVuY3Rpb25hbCBlbnJpY2htZW50cyBhcHByb2FjaGVzIGFyZSBnZW5lIHNldCBlbnJpY2htZW50IGFuYWx5c2lzLCBha2EgW0dTRUFdKGh0dHA6Ly9zb2Z0d2FyZS5icm9hZGluc3RpdHV0ZS5vcmcvZ3NlYS9pbmRleC5qc3ApLCBEYXRhYmFzZSBmb3IgQW5ub3RhdGlvbiwgVmlzdWFsaXphdGlvbiBhbmQgSW50ZWdyYXRlZCBEaXNjb3ZlcnksIGFrYSBbREFWSURdKGh0dHBzOi8vZGF2aWQubmNpZmNyZi5nb3YvKSwgW0luZ2VuaXR5XShodHRwczovL2RpZ2l0YWxpbnNpZ2h0cy5xaWFnZW4uY29tLyksIGFuZCBbaVBhdGh3YXkgR3VpZGVdCgpUaGUgVW5pdmVyc2l0eSBvZiBNaWNoaWdhbiBoYXMgbGljZW5zZSBhbmQgc3VwcG9ydCBmb3IgYWRkaXRpb25hbCB0b29scywgc3VjaCBhcyBDeXRvc2NhcGUsIHNvIHdlIHJlY29tbWVuZCByZWFjaGluZyBvdXQgdG8gc3RhZmYgd2l0aCBbVGF1Ym1hbiBMaWJyYXJ5XShodHRwczovL3d3dy5saWIudW1pY2guZWR1L2xvY2F0aW9ucy1hbmQtaG91cnMvdGF1Ym1hbi1oZWFsdGgtc2NpZW5jZXMtbGlicmFyeS9yZXNlYXJjaC1hbmQtY2xpbmljYWwtc3VwcG9ydCkgdG8gbGVhcm4gbW9yZSBhYm91dCByZXNvdXJjZXMgdGhhdCBtaWdodCBiZSBhcHBsaWNhdGlvbiB0b3lvdXIgcmVzZWFyY2guCgoKCgoKLS0tCgojIFNvdXJjZXMgVXNlZCAgICAgIAoqIEhCQyBER0UgdHJhaW5pbmcgbW9kdWxlLCBwYXJ0IDE6IGh0dHBzOi8vaGJjdHJhaW5pbmcuZ2l0aHViLmlvL0RHRV93b3Jrc2hvcC9sZXNzb25zLzA0X0RHRV9ERVNlcTJfYW5hbHlzaXMuaHRtbCAgICAKKiBIQkMgREdFIHRyYWluaW5nIG1vZHVsZSwgcGFydCAyOiBodHRwczovL2hiY3RyYWluaW5nLmdpdGh1Yi5pby9ER0Vfd29ya3Nob3AvbGVzc29ucy8wNV9ER0VfREVTZXEyX2FuYWx5c2lzMi5odG1sICAgIAoqIERFU2VxMiB2aWduZXR0ZTogaHR0cDovL2Jpb2NvbmR1Y3Rvci5vcmcvcGFja2FnZXMvZGV2ZWwvYmlvYy92aWduZXR0ZXMvREVTZXEyL2luc3QvZG9jL0RFU2VxMi5odG1sI2RpZmZlcmVudGlhbC1leHByZXNzaW9uLWFuYWx5c2lzICAgIAoqIEJpb2NvbmR1Y3RvciBHZW5vbWljIEFubm90YXRpb24gcmVzb3VyY2VzOiBodHRwOi8vYmlvY29uZHVjdG9yLm9yZy9wYWNrYWdlcy9kZXZlbC93b3JrZmxvd3MvdmlnbmV0dGVzL2Fubm90YXRpb24vaW5zdC9kb2MvQW5ub3RhdGlvbl9SZXNvdXJjZXMuaHRtbCAgICAKKiBCaW9NYXJ0IHZpZ25ldHRlOiBodHRwczovL2Jpb2NvbmR1Y3Rvci5vcmcvcGFja2FnZXMvcmVsZWFzZS9iaW9jL3ZpZ25ldHRlcy9iaW9tYVJ0L2luc3QvZG9jL2FjY2Vzc2luZ19lbnNlbWJsLmh0bWwgICAgCgoKCmBgYHtyIFdyaXRlT3V0LlJEYXRhLCBldmFsPVRSVUUsIGVjaG89RkFMU0UsIG1lc3NhZ2U9RkFMU0UsIHdhcm5pbmc9RkFMU0V9CiNIaWRkZW4gY29kZSBibG9jayB0byB3cml0ZSBvdXQgZGF0YSBmb3Iga25pdHRpbmcKc2F2ZS5pbWFnZShmaWxlID0gInJkYXRhL1J1bm5pbmdEYXRhX0Z1bGwuUkRhdGEiKQpgYGAKCiMgQWRkaXRpb25hbCBSZXNvdXJjZXMKKiBNSURBUyBSZXByb2R1Y2libGl0eSBIdWI6IGh0dHBzOi8vbWlkYXMudW1pY2guZWR1L3JlcHJvZHVjaWJpbGl0eS1vdmVydmlldy8KKiBBUkMgcmVzb3VyY2VzOiBodHRwczovL2FyYy10cy51bWljaC5lZHUvCiogR2VuZSBTZXQgRW5yaWNobWVudCBSZXNvdXJjZXMgZnJvbSBCaW9jb25kdWN0b3I6IGh0dHBzOi8vYmlvaW5mb3JtYXRpY3MtY29yZS1zaGFyZWQtdHJhaW5pbmcuZ2l0aHViLmlvL2NydWstc3VtbWVyLXNjaG9vbC0yMDE4L1JOQVNlcTIwMTgvaHRtbC8wNl9HZW5lX3NldF90ZXN0aW5nLm5iLmh0bWwKKiBVc2luZyBIVFNlcSBkYXRhIHdpdGggREVTZXEyOiBodHRwczovL2FuZ3VzLnJlYWR0aGVkb2NzLmlvL2VuLzIwMTkvZGlmZi1leC1hbmQtdml6Lmh0bWwKKiBEZXRhaWxlZCBSTkEtc2VxIGFuYWx5c2lzIHBhcGVyOiBodHRwczovL3d3dy5uY2JpLm5sbS5uaWguZ292L3BtYy9hcnRpY2xlcy9QTUM2MDk2MzQ2LwoqIE92ZXJ2aWV3IG9mIFJOQS1zZXEgYW5hbHlzaXMgY29uc2lkZXJhdGlvbnM6IGh0dHBzOi8vYWNhZGVtaWMtb3VwLWNvbS5wcm94eS5saWIudW1pY2guZWR1L2JmZy9hcnRpY2xlLzE0LzIvMTMwLzI1NzM3MAoqIEFsdGVybmF0aXZlIG92ZXJ2aWV3IG9mIERFU2VxMiwgaW5jbHVkaW5nIHZpc3VhbGl6YXRpb25zIGFuZCBmdW5jdGlvbmFsIGVucmljaG1lbnRzOiBodHRwOi8vZHB1dGhpZXIuZ2l0aHViLmlvL2pnYjcxZS1wb2x5dGVjaC1iaW9pbmZvLWFwcC9wcmFjdGljYWwvcm5hLXNlcV9SL3JuYXNlcV9kaWZmX1NuZjIuaHRtbAoKLS0tCgoKIyBTZXNzaW9uIEluZm8KYGBge3IgU2Vzc2lvbkluZm99CnNlc3Npb25JbmZvKCkKYGBgCgotLS0KClRoZXNlIG1hdGVyaWFscyBoYXZlIGJlZW4gYWRhcHRlZCBhbmQgZXh0ZW5kZWQgZnJvbSBtYXRlcmlhbHMgbGlzdGVkIGFib3ZlLiBUaGVzZSBhcmUgb3BlbiBhY2Nlc3MgbWF0ZXJpYWxzIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgW0NyZWF0aXZlIENvbW1vbnMgQXR0cmlidXRpb24gbGljZW5zZSAoQ0MgQlkgNC4wKV0oaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnkvNC4wLyksIHdoaWNoIHBlcm1pdHMgdW5yZXN0cmljdGVkIHVzZSwgZGlzdHJpYnV0aW9uLCBhbmQgcmVwcm9kdWN0aW9uIGluIGFueSBtZWRpdW0sIHByb3ZpZGVkIHRoZSBvcmlnaW5hbCBhdXRob3IgYW5kIHNvdXJjZSBhcmUgY3JlZGl0ZWQu</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("Module11_DEVisualizations.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
